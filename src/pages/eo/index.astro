---
import { getRelativeLocaleUrl } from 'astro:i18n';
import { getTranslations } from '../../i18n/utils.js';
import InicioInteractivo from '../../components/InicioInteractivo.astro';
import Layout from '../../layouts/Layout.astro';
import Particulas from '../../components/Particulas.astro';
import SplashScreen from '../../components/SplashScreen.astro';

const currentLang = 'eo';
const t = await getTranslations(currentLang);
---

<Layout
    title={t.content.title}
    description={t.content.description}
>
    <!-- Splash Screen -->
    <SplashScreen
        duration={8000}
        showLogo={true}
        showProgress={true}
        backgroundColor="#1e293b"
        currentLang={currentLang}
    />

    <!-- Contenido principal (inicialmente oculto) -->
    <div id="main-content" class="main-content">
        <!-- Background -->
        <div class="page-background">
            <div class="gradient-mesh"></div>
            <div class="dots-pattern"></div>
        </div>

        <Particulas
            count={10}
            brightness="bright"
            size="medium"
            speed="normal"
        />

        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-badge">
                        <span>{t.hero.badge}</span>
                    </div>
                    <h1 class="hero-title">
                        {t.hero.welcomeTo} <span class="accent">Pelee</span>
                    </h1>
                    <p class="hero-description">
                        {t.hero.description}
                    </p>
                    <div class="hero-actions">
                        <a href="#section-title" class="btn-primary hero-btn">
                            <span>{t.hero.exploreButton}</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Cards Section -->
        <section class="main-section">
            <div class="container">
                <div class="section-header" id="section-title">
                    <h5>{t.sections.explore}</h5>
                    <p class="section-subtitle">{t.sections.subtitle}</p>
                </div>

                <div class="cards-grid">
                    <!-- Historia Card -->
                    <a href={getRelativeLocaleUrl(currentLang, '/historia')} class="main-card-link">
                        <article class="main-card" data-category="historia">
                            <div class="card-header">
                                <div class="card-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M6.5 2H20V22H6.5A2.5 2.5 0 0 1 4 19.5V4.5A2.5 2.5 0 0 1 6.5 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="card-badge">{t.cards.historia.badge}</div>
                            </div>
                            <h3 class="card-title">{t.cards.historia.title}</h3>
                            <p class="card-description">
                                {t.cards.historia.description}
                            </p>
                            <div class="card-stats">
                                <span>{t.cards.historia.stats}</span>
                            </div>
                        </article>
                    </a>

                    <!-- Distritos Card -->
                    <a href={getRelativeLocaleUrl(currentLang, '/distritos')} class="main-card-link">
                        <article class="main-card" data-category="distritos">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M3 21H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M5 21V7L13 2L21 7V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9 9V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M17 9V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="card-badge">{t.cards.distritos.badge}</div>
                        </div>
                        <h3 class="card-title">{t.cards.distritos.title}</h3>
                        <p class="card-description">
                            {t.cards.distritos.description}
                        </p>
                        <div class="card-stats">
                            <span>{t.cards.distritos.stats}</span>
                        </div>
                    </article>
                    </a>

                    <!-- Mapa Card -->
                    <a href={getRelativeLocaleUrl(currentLang, '/mapa')} class="main-card-link">
                    <article class="main-card" data-category="mapa">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M21 10C21 17 12 23 12 23S3 17 3 10A9 9 0 1 1 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="card-badge">{t.cards.mapa.badge}</div>
                        </div>
                        <h3 class="card-title">{t.cards.mapa.title}</h3>
                        <p class="card-description">
                            {t.cards.mapa.description}
                        </p>
                        <div class="card-stats">
                            <span>{t.cards.mapa.stats}</span>
                        </div>
                    </article>
                    </a>

                    <!-- Autoridades Card -->
                    <a href={getRelativeLocaleUrl(currentLang, '/autoridades')} class="main-card-link">
                    <article class="main-card" data-category="autoridades">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 22S8 18 8 13V6L12 2L16 6V13C16 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="card-badge">{t.cards.autoridades.badge}</div>
                        </div>
                        <h3 class="card-title">{t.cards.autoridades.title}</h3>
                        <p class="card-description">
                            {t.cards.autoridades.description}
                        </p>
                        <div class="card-stats">
                            <span>{t.cards.autoridades.stats}</span>
                        </div>
                    </article>
                    </a>
                </div>
            </div>
        </section>
        
        <!-- Componente de interacciones -->
        <InicioInteractivo />
    </div>
</Layout>

<style>
    .main-content {
        opacity: 0;
        transition: opacity 0.8s ease-in-out;
    }

    .main-content.show {
        opacity: 1;
    }

    /* Animaciones adicionales para el contenido principal */
    .hero {
        animation: slideInFromBottom 1s ease-out 0.3s both;
    }

    .cards-grid {
        animation: slideInFromBottom 1s ease-out 0.6s both;
    }

    @keyframes slideInFromBottom {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Prevenir scroll durante el splash */
    body.splash-active {
        overflow: hidden;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const mainContent = document.getElementById('main-content');
        const body = document.body;
        
        // Prevenir scroll durante el splash
        body.classList.add('splash-active');
        
        // Escuchar cuando el splash termine
        document.addEventListener('splashComplete', () => {
            if (mainContent) {
                mainContent.classList.add('show');
                body.classList.remove('splash-active');
            }
        });
    });
</script>